<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kh.healthcare.livingHealth.drug.DrugMapper">
    <select id="find">
        SELECT
        NO,
        NAME,
        IMAGE_URL,
        EFFECT
        FROM MEDICATION
        WHERE 1=1
        <if test="name != null and name != ''">
            AND NAME LIKE '%' || #{name} || '%'
        </if>
        <if test="form != null and form != '' ">
            AND FORM = #{form}
        </if>
        <if test="color1 != null and color1 != ''">
            AND COLOR1 = #{color1}
        </if>
        <if test="color2 != null">
            AND COLOR2 = #{color2}
        </if>
    </select>

    <update id="del">
        UPDATE USER_MEDICATION
            SET
                DEL_YN = 'Y',
                DEL_TIME = SYSDATE
        WHERE MEMBER = #{userNo}
        AND NO IN
        <foreach item="item" collection="vo" open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>

    <delete id="removeDrug">
        DELETE USER_MEDICATION
        WHERE MEMBER = #{userNo}
        AND NO IN
        <foreach item="item" collection="vo" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    

</mapper>
